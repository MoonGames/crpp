\chapter{Paint}

This commands informs both server and client about update in particular layer.

\subsection{List of parameters}

\begin{itemize}
	\item UDTY -- update type
	\item UDID -- update ID
	\item LYID -- layer ID
	\item CNID -- canvas ID
	\item XCOR -- X coordinate
	\item YCOR -- Y coordinate
	\item UIMG -- update image				
\end{itemize}

\subsection{Detailed description of parameters}

\subsubsection{Update type}

Update type is four bytes unsigned integer determining how this update should be applied. It could has value $0$ and $1$, where $0$ means \emph{add} and $1$ \emph{remove}.

In case of \emph{add} update ``source over'' compositing algorithm should be used (update is paint over/on current layer).

In case of \emph{remove} update it is the alpha channel (of pixels) which is affected. Resulting alpha of every pixel $D_{a}$ is counted as $D_{a} = S_{a} \cdot P_{a}$, where $S_{a}$ is alpha in update picture (received update data) and $P_{a}$ is original alpha (in layer before update). Mentioned equation considers $0$ as no transparency and $1$ as full transparency with linear transition ($0.5$ is half-transparency). 

\subsubsection{Update ID}

Four bytes unsigned integer representing ID of the update.

\subsubsection{Layer ID}

Obsahuje čtyřbytové neznaménkové celé číslo, které identifikuje updatovanou vrstvu.

\subsubsection{Canvas ID}

Obsahuje čtyřbytové neznaménkové celé číslo, které identifikuje updatované kreslící plátno (je tak možné kreslit na několik pláten).

\subsubsection{X coordinate}

Obsahuje čtyřbytové neznaménkové celé číslo, které udává X souřadnici levého horního rohu updatu (kam se aplikuje updatovací obrázek).

\subsubsection{Y coordinate}

Obsahuje čtyřbytové neznaménkové celé číslo, které udává Y souřadnici levého horního rohu updatu (kam se aplikuje updatovací obrázek).

\subsubsection{Update image}

See specification in \ref{connection.data_types.image}.